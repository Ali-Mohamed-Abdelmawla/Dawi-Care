import{j as e,r as T,d as w,s as k}from"./index-DF1D02Hj.js";import{a as M,C as u,u as A}from"./index.esm-Bs_MGDSt.js";import{a as D}from"./axios-CyFV80k_.js";import{S as C}from"./react-select.esm-DZnH2LNg.js";import{d as P}from"./AddBoxTwoTone-D1J65XFy.js";import{u as F}from"./Paper-C9iPag-B.js";import{B as m}from"./Box-D4cKv5_V.js";import{T as f}from"./Typography-D94uCwLm.js";import{G as o,T as p}from"./TextField-BCa7AWxh.js";import{L as W,A as q}from"./AdapterDayjs-C9hUxPF7.js";import{S as B}from"./StaticTimePicker-PD4VRi65.js";import{L as $}from"./LoadingButton-BPIyvWo9.js";import{b as I,B as z,F as R}from"./Menu-C7haSOWu.js";import"./toPropertyKey-PLuKRk1e.js";import"./createSvgIcon-QGnDfLuw.js";import"./isMuiElement-DtCTRzqF.js";import"./mergeSlotProps-BtuCJPHe.js";import"./OutlinedInput-BKrgIPXM.js";import"./useThemeProps-B6NQfqaC.js";import"./useThemeProps-wCF_0idl.js";import"./getThemeProps-60JEWZhT.js";import"./Button-DJQ79VO-.js";import"./IconButton-CVXum2NQ.js";import"./useSlotProps-C21nwL-b.js";import"./MenuItem-BDtCcL-v.js";import"./ListItem-Y1O789Fh.js";import"./Chip-BCCKjiS7.js";import"./CircularProgress-C94875X6.js";const V=[{value:"الاسنان",label:"الاسنان"},{value:"باطنه غدد صماء و كلي و سكر",label:"باطنه غدد صماء و كلي و سكر"},{value:"باطنه الجهاز الهضمي و الكبد",label:"باطنه الجهاز الهضمي و الكبد"},{value:"باطنه امراض دم و مناعه",label:"باطنه امراض دم و مناعه"},{value:"القلب",label:"القلب"},{value:"المسالك البوليه",label:"المسالك البوليه"},{value:"الصدر",label:"الصدر"},{value:"الجلديه",label:"الجلديه"},{value:"اوعيه دمويه",label:"اوعيه دمويه"},{value:"انف و اذن",label:"انف و اذن"},{value:"الرمد",label:"الرمد"},{value:"النساء و التوليد",label:"النساء و التوليد"},{value:"المخ و الاعصاب",label:"المخ و الاعصاب"},{value:"الاطفال",label:"الاطفال"},{value:"التجميل",label:"التجميل"},{value:"روماتيزم",label:"روماتيزم"},{value:"عظام و كسور و اصابات ملاعب",label:"عظام و كسور و اصابات ملاعب"},{value:"عظام و عمود فقرى",label:"عظام و عمود فقرى"},{value:"امراض العظام و المفاصل",label:"امراض العظام و المفاصل"},{value:"جراحه الاطفال",label:"جراحه الاطفال"},{value:"جراحه اليد",label:"جراحه اليد"},{value:"جراحه عامه",label:"جراحه عامه"},{value:"سونار",label:"سونار"},{value:"تغذيه",label:"تغذيه"}],O=[{value:"الأحد",label:"الأحد"},{value:"الاثنين",label:"الاثنين"},{value:"الثلاثاء",label:"الثلاثاء"},{value:"الأربعاء",label:"الأربعاء"},{value:"الخميس",label:"الخميس"},{value:"الجمعة",label:"الجمعة"},{value:"السبت",label:"السبت"}],Y=l=>l&&l.size>2*1024*1024?"حجم الملف يجب أن يكون أقل من 2 ميجابايت":!0,L=(l,r)=>l&&!r.includes(l.type)?`نوع الملف يجب أن يكون ${r.join(" أو ")}`:!0,H=({control:l,handleSubmit:r,onSubmit:c,loading:x,profileImageUrl:d,handleOpenModal:b,handleCloseModal:g,openModal:h,handleProfileImageChange:S})=>{const y=F(),v=M({control:l,name:"working_days"});return e.jsxs(m,{sx:{maxWidth:800,margin:"auto",padding:3,".muirtl-14s5rfu-MuiFormLabel-root-MuiInputLabel-root":{zIndex:"0"},".muirtl-1u21k29-MuiPickersLayout-root":{border:"1px solid #00000024",padding:"15px",borderRadius:"6px",backgroundColor:"#bee9e8"},".muirtl-2x8kvt-MuiPickersArrowSwitcher-root-MuiTimeClock-arrowSwitcher":{left:"5px",top:"5px"},".muirtl-1wniyei-MuiTypography-root":{backgroundColor:"#bee9e8",padding:"10px",borderRadius:"6px",border:"1px solid #00000024"}},children:[e.jsx(f,{variant:"h4",gutterBottom:!0,pb:1,sx:{borderBottom:1,borderColor:y.palette.dividerColor.main},children:"إضافة طبيب"}),d&&e.jsx(m,{sx:{position:"relative",cursor:"pointer"},onClick:b,children:e.jsx(m,{component:"img",sx:{width:100,height:100,borderRadius:"50%",objectFit:"cover"},alt:"صورة الطبيب",src:d})}),e.jsxs("form",{onSubmit:r(c),children:[e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"name",control:l,defaultValue:"",rules:{required:"الاسم مطلوب"},render:({field:a,fieldState:{error:t}})=>e.jsx(p,{...a,label:"الاسم",fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"national_id",control:l,rules:{required:"الرقم القومي مطلوب",pattern:{value:/^\d+$/,message:"يجب إدخال أرقام فقط"},minLength:{value:14,message:"الرقم القومي يجب أن يكون 14 رقمًا"},maxLength:{value:14,message:"الرقم القومي يجب أن يكون 14 رقمًا"}},render:({field:a,fieldState:{error:t}})=>e.jsx(p,{...a,label:"الرقم القومي",type:"text",fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"phone_number",control:l,rules:{required:"رقم الهاتف مطلوب",pattern:{value:/^\d+$/,message:"يجب إدخال أرقام فقط"},minLength:{value:11,message:"أدخل رقم هاتف صالح (11-15 رقمًا)"},maxLength:{value:15,message:"أدخل رقم هاتف صالح (11-15 رقمًا)"}},render:({field:a,fieldState:{error:t}})=>e.jsx(p,{...a,label:"رقم الهاتف",type:"text",fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"profile_photo",control:l,defaultValue:null,rules:{required:"الصورة الشخصية مطلوبة",validate:{fileSize:Y,fileType:a=>L(a,["image/jpeg","image/png","image/jpg"])}},render:({field:{onChange:a},fieldState:{error:t}})=>e.jsx(p,{type:"file",onChange:i=>{const s=i.target.files;s&&s[0]&&(a(s[0]),S(s[0]))},fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,InputLabelProps:{shrink:!0},label:"الصورة الشخصية",variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"union_registration",control:l,defaultValue:null,rules:{required:"تسجيل النقابة مطلوب",validate:{fileType:a=>L(a,["image/jpeg","image/png","image/jpg","application/pdf"])}},render:({field:{onChange:a},fieldState:{error:t}})=>e.jsx(p,{type:"file",onChange:i=>{const s=i.target.files;s&&s[0]&&a(s[0])},fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,InputLabelProps:{shrink:!0},label:"تسجيل النقابة",variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"scientific_degree",control:l,defaultValue:"",rules:{required:"الدرجة العلمية مطلوبة"},render:({field:a,fieldState:{error:t}})=>e.jsx(p,{...a,label:"الدرجة العلمية",fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:"fixed_salary",control:l,rules:{required:"الراتب الثابت مطلوب",pattern:{value:/^\d+$/,message:"يجب إدخال أرقام فقط"}},render:({field:a,fieldState:{error:t}})=>e.jsx(p,{...a,label:"الراتب الثابت",type:"text",fullWidth:!0,margin:"normal",error:!!t,helperText:t==null?void 0:t.message,variant:"outlined"})})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{name:"specialty",control:l,rules:{required:"التخصص مطلوب"},render:({field:a,fieldState:{error:t}})=>e.jsxs(m,{children:[e.jsx(C,{...a,options:V,placeholder:"اختر التخصص"}),t&&e.jsx(f,{color:"error",children:t.message})]})})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{name:"working_days",control:l,rules:{required:"أيام العمل مطلوبة"},render:({field:a,fieldState:{error:t}})=>e.jsxs(m,{children:[e.jsx(C,{...a,options:O,isMulti:!0,placeholder:"اختر أيام العمل"}),t&&e.jsx(f,{color:"error",children:t.message})]})})}),v&&v.map(a=>e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(u,{name:`working_hours.${a.value}.start`,control:l,defaultValue:null,rules:{required:`وقت بدء العمل ليوم ${a.label} مطلوب`},render:({field:t,fieldState:{error:i}})=>e.jsx(W,{dateAdapter:q,adapterLocale:"ar",children:e.jsxs(m,{children:[e.jsx(f,{variant:"subtitle1",gutterBottom:!0,children:`وقت بدء العمل ليوم ${a.label}`}),e.jsx(B,{value:t.value,onChange:s=>t.onChange(s),slotProps:{actionBar:{actions:[]}},ampm:!1}),i&&e.jsx(f,{color:"error",variant:"caption",children:i.message})]})})})},a.value))]}),e.jsx($,{endIcon:e.jsx(P,{}),loading:x,loadingPosition:"end",variant:"contained",type:"submit",sx:{mt:2},children:e.jsx("span",{children:"إضافة الطبيب"})})]}),e.jsx(I,{open:h,onClose:g,closeAfterTransition:!0,slots:{backdrop:z},slotProps:{backdrop:{timeout:500}},children:e.jsx(R,{in:h,children:e.jsx(m,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4},children:d&&e.jsx("img",{src:d,alt:"صورة الطبيب",style:{maxWidth:"100%",maxHeight:"80vh"}})})})})]})},je=()=>{const[l,r]=T.useState(!1),{control:c,handleSubmit:x}=A(),[d,b]=T.useState(null),[g,h]=T.useState(!1),S=w(),y=()=>h(!0),v=()=>h(!1),a=i=>{const s=sessionStorage.getItem("accessToken");r(!0),console.log(i);const j=E(i.working_hours);console.log(j);const n=new FormData;n.append("name",i.name),n.append("national_id",i.national_id.toString()),n.append("phone_number",i.phone_number.toString()),n.append("specialty",i.specialty.value),n.append("fixed_salary",i.fixed_salary.toString()),n.append("scientific_degree",i.scientific_degree),i.profile_photo&&n.append("profile_photo",i.profile_photo),i.union_registration&&n.append("union_registration",i.union_registration),n.append("data",j.toString()),D.post("/api/Add_Doctor",n,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}}).then(_=>{_.status===200&&(r(!1),k.fire({icon:"success",title:"تم إضافة الطبيب بنجاح"}).then(()=>{S("/SystemAdmin/Doctors")}))}).catch(_=>{console.log(_),r(!1),k.fire({icon:"error",title:"حدث خطأ ما"})})},t=i=>{const s=new FileReader;s.onload=j=>{var n;b((n=j.target)==null?void 0:n.result)},s.readAsDataURL(i)};return e.jsx(H,{control:c,handleSubmit:x,onSubmit:a,loading:l,profileImageUrl:d,handleOpenModal:y,handleCloseModal:v,openModal:g,handleProfileImageChange:t})};function E(l){const r=[];for(const c in l){const x=l[c].start;if(x){const d=x.format("YYYY-MM-DD HH:mm:ss"),g=new Date(d).toTimeString().split(" ")[0];console.log(g),r.push(c,g)}}return console.log(r),r}export{je as default};
