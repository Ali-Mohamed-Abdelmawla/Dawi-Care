import{_ as p,c as M,a as f,r as h,b as D,j as e,u as T,i as y,d as G}from"./index-DF1D02Hj.js";import{u as F}from"./index.esm-Bs_MGDSt.js";import{a as z}from"./axios-CyFV80k_.js";import{r as k}from"./createSvgIcon-QGnDfLuw.js";import{d as O,a as q}from"./VisibilityOff-DKi6BRV9.js";import{B as x}from"./Box-D4cKv5_V.js";import{A}from"./Avatar-B-QZB_q1.js";import{c as H,a as N,g as V,s as B,T as E}from"./Typography-D94uCwLm.js";import{F as j,I as C,O as w,a as W}from"./OutlinedInput-BKrgIPXM.js";import{I as U}from"./InputAdornment-DbWrX7NJ.js";import{I as K}from"./IconButton-CVXum2NQ.js";import{L as J}from"./LoadingButton-BPIyvWo9.js";import{s as Q}from"./styled-CPBbA9UG.js";import{u as X}from"./useThemeProps-wCF_0idl.js";import"./isMuiElement-DtCTRzqF.js";import"./mergeSlotProps-BtuCJPHe.js";import"./Button-DJQ79VO-.js";import"./CircularProgress-C94875X6.js";import"./createStyled-93osxTnM.js";import"./getThemeProps-60JEWZhT.js";const Y=["className","component","disableGutters","fixed","maxWidth","classes"],Z=M(),ee=Q("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,a)=>{const{ownerState:i}=o;return[a.root,a[`maxWidth${f(String(i.maxWidth))}`],i.fixed&&a.fixed,i.disableGutters&&a.disableGutters]}}),te=o=>X({props:o,name:"MuiContainer",defaultTheme:Z}),ae=(o,a)=>{const i=n=>V(a,n),{classes:m,fixed:d,disableGutters:l,maxWidth:t}=o,s={root:["root",t&&`maxWidth${f(String(t))}`,d&&"fixed",l&&"disableGutters"]};return N(s,i,m)};function se(o={}){const{createStyledComponent:a=ee,useThemeProps:i=te,componentName:m="MuiContainer"}=o,d=a(({theme:t,ownerState:s})=>p({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!s.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}),({theme:t,ownerState:s})=>s.fixed&&Object.keys(t.breakpoints.values).reduce((n,r)=>{const c=r,u=t.breakpoints.values[c];return u!==0&&(n[t.breakpoints.up(c)]={maxWidth:`${u}${t.breakpoints.unit}`}),n},{}),({theme:t,ownerState:s})=>p({},s.maxWidth==="xs"&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},s.maxWidth&&s.maxWidth!=="xs"&&{[t.breakpoints.up(s.maxWidth)]:{maxWidth:`${t.breakpoints.values[s.maxWidth]}${t.breakpoints.unit}`}}));return h.forwardRef(function(s,n){const r=i(s),{className:c,component:u="div",disableGutters:I=!1,fixed:L=!1,maxWidth:P="lg"}=r,R=D(r,Y),b=p({},r,{component:u,disableGutters:I,fixed:L,maxWidth:P}),$=ae(b,m);return e.jsx(d,p({as:u,ownerState:b,className:H($.root,c),ref:n},R))})}const oe=se({createStyledComponent:B("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,a)=>{const{ownerState:i}=o;return[a.root,a[`maxWidth${f(String(i.maxWidth))}`],i.fixed&&a.fixed,i.disableGutters&&a.disableGutters]}}),useThemeProps:o=>T({props:o,name:"MuiContainer"})});var g={},ie=y;Object.defineProperty(g,"__esModule",{value:!0});var S=g.default=void 0,ne=ie(k()),re=e;S=g.default=(0,ne.default)((0,re.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login");var v={},de=y;Object.defineProperty(v,"__esModule",{value:!0});var _=v.default=void 0,le=de(k()),me=e;_=v.default=(0,le.default)((0,me.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined");const ue=({register:o,errors:a,onSubmit:i,loading:m})=>{const[d,l]=h.useState(!1),t=()=>l(r=>!r),s=r=>{r.preventDefault()},n=r=>{r.key==="Enter"&&(r.preventDefault(),i(r))};return e.jsxs(x,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(A,{sx:{m:1,bgcolor:"secondary.main"},children:e.jsx(_,{})}),e.jsx(E,{component:"h1",variant:"h5",children:"تسجيل الدخول الي عيادات داوي-كير"}),e.jsxs(x,{component:"form",onSubmit:i,onKeyPress:n,noValidate:!0,sx:{mt:1,width:"100%",maxWidth:400},children:[e.jsxs(j,{fullWidth:!0,margin:"normal",error:!!a.email,children:[e.jsx(C,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsx(w,{id:"email",type:"email",label:"البريد الإلكتروني",autoComplete:"email",autoFocus:!0,...o("email",{required:"البريد الإلكتروني مطلوب"})}),a.email&&e.jsx(W,{children:a.email.message})]}),e.jsxs(j,{fullWidth:!0,margin:"normal",error:!!a.password,variant:"outlined",children:[e.jsx(C,{htmlFor:"password",children:"كلمة المرور"}),e.jsx(w,{id:"password",type:d?"text":"password",label:"كلمة المرور",...o("password",{required:"كلمة المرور مطلوبة",minLength:{value:6,message:"يجب أن تكون كلمة المرور 6 أحرف على الأقل"}}),endAdornment:e.jsx(U,{position:"end",children:e.jsx(K,{"aria-label":"toggle password visibility",onClick:t,onMouseDown:s,edge:"end",children:d?e.jsx(O,{}):e.jsx(q,{})})}),inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}}}),a.password&&e.jsx(W,{children:a.password.message})]}),e.jsx(J,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},loading:m,loadingPosition:"end",endIcon:e.jsx(S,{}),children:e.jsx("span",{children:"تسجيل الدخول"})})]})]})},$e=()=>{const{register:o,handleSubmit:a,formState:{errors:i}}=F(),m=G(),[d,l]=h.useState(!1),t=s=>{l(!0),z.post("/api/login",{},{headers:{"Content-Type":"application/json"},params:{email:s.email,password:s.password}}).then(n=>{l(!1),sessionStorage.setItem("accessToken",n.data.token),n.data.data.role==="admin"&&m("/SystemAdmin",{state:{adminData:n.data.data}})}).catch(n=>{console.log(n),l(!1)})};return e.jsx(x,{sx:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden"},children:e.jsx(oe,{component:"main",maxWidth:"xs",sx:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:e.jsx(ue,{register:o,errors:i,onSubmit:a(t),loading:d})})})};export{$e as default};
