import{j as t,r as f,d as j,s as x}from"./index-DF1D02Hj.js";import{C as m,u as S}from"./index.esm-Bs_MGDSt.js";import{a as y}from"./axios-CyFV80k_.js";import{d as b}from"./AddBoxTwoTone-D1J65XFy.js";import{S as v}from"./react-select.esm-DZnH2LNg.js";import{w as T}from"./EmployeeUtils-CTSoHGJR.js";import{u as _}from"./Paper-C9iPag-B.js";import{B as g}from"./Box-D4cKv5_V.js";import{T as c}from"./Typography-D94uCwLm.js";import{G as i,T as o}from"./TextField-BCa7AWxh.js";import{L}from"./LoadingButton-BPIyvWo9.js";import"./createSvgIcon-QGnDfLuw.js";import"./isMuiElement-DtCTRzqF.js";import"./mergeSlotProps-BtuCJPHe.js";import"./OutlinedInput-BKrgIPXM.js";import"./toPropertyKey-PLuKRk1e.js";import"./Menu-C7haSOWu.js";import"./useSlotProps-C21nwL-b.js";import"./Button-DJQ79VO-.js";import"./CircularProgress-C94875X6.js";const q=({control:a,handleSubmit:r,onSubmit:d,loading:p})=>{const u=_();return t.jsxs(g,{sx:{maxWidth:800,margin:"auto",padding:3},children:[t.jsx(c,{variant:"h4",gutterBottom:!0,pb:1,sx:{borderBottom:1,borderColor:u.palette.dividerColor.main},children:"إضافة موظف"}),t.jsxs("form",{onSubmit:r(d),children:[t.jsxs(i,{container:!0,spacing:3,children:[t.jsx(i,{item:!0,xs:12,sm:6,children:t.jsx(m,{name:"name",control:a,defaultValue:"",rules:{required:"الاسم مطلوب"},render:({field:s,fieldState:{error:e}})=>t.jsx(o,{...s,label:"الاسم",fullWidth:!0,margin:"normal",error:!!e,helperText:e==null?void 0:e.message})})}),t.jsx(i,{item:!0,xs:12,sm:6,children:t.jsx(m,{name:"national_id",control:a,rules:{required:"الرقم القومي مطلوب",pattern:{value:/^\d+$/,message:"يجب إدخال أرقام فقط"},minLength:{value:14,message:"الرقم القومي يجب أن يكون 14 رقمًا"},maxLength:{value:14,message:"الرقم القومي يجب أن يكون 14 رقمًا"}},render:({field:s,fieldState:{error:e}})=>t.jsx(o,{...s,label:"الرقم القومي",type:"text",fullWidth:!0,margin:"normal",error:!!e,helperText:e==null?void 0:e.message})})}),t.jsx(i,{item:!0,xs:12,sm:6,children:t.jsx(m,{name:"phone_number",control:a,rules:{required:"رقم الهاتف مطلوب",pattern:{value:/^\d+$/,message:"يجب إدخال أرقام فقط"},minLength:{value:11,message:"أدخل رقم هاتف صالح (11-15 رقمًا)"},maxLength:{value:15,message:"أدخل رقم هاتف صالح (11-15 رقمًا)"}},render:({field:s,fieldState:{error:e}})=>t.jsx(o,{...s,label:"رقم الهاتف",type:"text",fullWidth:!0,margin:"normal",error:!!e,helperText:e==null?void 0:e.message})})}),t.jsx(i,{item:!0,xs:12,sm:6,children:t.jsx(m,{name:"description",control:a,defaultValue:"",rules:{required:"التوصيف الوظيفي مطلوبة"},render:({field:s,fieldState:{error:e}})=>t.jsx(o,{...s,label:"التوصيف الوظيفي",fullWidth:!0,margin:"normal",error:!!e,helperText:e==null?void 0:e.message})})}),t.jsx(i,{item:!0,xs:12,sm:6,children:t.jsx(m,{name:"fixed_salary",control:a,rules:{required:"الراتب الثابت مطلوب",pattern:{value:/^\d+$/,message:"يجب إدخال أرقام فقط"}},render:({field:s,fieldState:{error:e}})=>t.jsx(o,{...s,label:"الراتب الثابت",type:"text",fullWidth:!0,margin:"normal",error:!!e,helperText:e==null?void 0:e.message})})}),t.jsx(i,{item:!0,xs:12,children:t.jsx(m,{name:"working_days",control:a,rules:{required:"أيام العمل مطلوبة"},render:({field:s,fieldState:{error:e}})=>t.jsxs(g,{children:[t.jsx(v,{...s,options:T,isMulti:!0,placeholder:"اختر أيام العمل"}),e&&t.jsx(c,{color:"error",children:e.message})]})})})]}),t.jsx(L,{endIcon:t.jsx(b,{}),loading:p,loadingPosition:"end",variant:"contained",type:"submit",sx:{mt:2},children:t.jsx("span",{children:"إضافة الموظف"})})]})]})},J=()=>{const[a,r]=f.useState(!1),{control:d,handleSubmit:p}=S(),u=j(),s=e=>{const h=sessionStorage.getItem("accessToken");r(!0);const n=new FormData;n.append("name",e.name),n.append("national_id",e.national_id.toString()),n.append("phone_number",e.phone_number.toString()),n.append("description",e.description.toString()),n.append("fixed_salary",e.fixed_salary.toString()),n.append("data",e.working_days.map(l=>l.value).join(",")),console.log(e),y.post("/api/Add_Employee",n,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"multipart/form-data"}}).then(l=>{console.log(n),l.status===200&&(r(!1),x.fire({icon:"success",title:"تم إضافة الموظف بنجاح"}).then(()=>{u("/SystemAdmin/Employees")}))}).catch(l=>{console.log(l),r(!1),x.fire({icon:"error",title:"حدث خطأ ما"})})};return t.jsx(q,{control:d,handleSubmit:p,onSubmit:s,loading:a})};export{J as default};
