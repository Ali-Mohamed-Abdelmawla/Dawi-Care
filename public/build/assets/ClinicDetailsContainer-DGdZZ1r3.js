import{j as e,r as a,h as z}from"./index-DF1D02Hj.js";import{g as J,S as K,a as N,h as g,i as Q,j as U}from"./StyledClinicsComponents-B05oX19X.js";import{T as G}from"./Typography-D94uCwLm.js";import{I as X}from"./InputAdornment-DbWrX7NJ.js";import{T as Y,a as Z,b as _,c as W,d as ee}from"./TableRow-Ce_QXQAA.js";import{T as v}from"./TableCell-CbZ5-y0A.js";import{G as p,T as C}from"./TextField-BCa7AWxh.js";import{B as te}from"./Box-D4cKv5_V.js";import{B as k}from"./Button-DJQ79VO-.js";import"./createSvgIcon-QGnDfLuw.js";import"./isMuiElement-DtCTRzqF.js";import"./mergeSlotProps-BtuCJPHe.js";import"./OutlinedInput-BKrgIPXM.js";import"./CardContent-Be-YTDra.js";import"./Paper-C9iPag-B.js";import"./Menu-C7haSOWu.js";import"./useSlotProps-C21nwL-b.js";const se=({clinic:s,doctors:d,onDoctorSelect:i,searchTerm:n,setSearchTerm:c})=>e.jsxs(J,{elevation:3,children:[e.jsxs(G,{variant:"h5",gutterBottom:!0,children:["حسابات عيادة ",s.label]}),e.jsx(K,{fullWidth:!0,variant:"outlined",placeholder:"ابحث عن طبيب...",value:n,onChange:r=>c(r.target.value),margin:"normal",InputProps:{startAdornment:e.jsx(X,{position:"start",children:e.jsx(N,{})})}}),e.jsx(Y,{children:e.jsxs(Z,{children:[e.jsx(_,{children:e.jsxs(W,{children:[e.jsx(g,{children:"اسم الطبيب"}),e.jsx(g,{align:"left",children:"الراتب"}),e.jsx(g,{align:"left",children:"نسبة المركز"}),e.jsx(g,{align:"left",children:"الدخل الإجمالي"})]})}),e.jsx(ee,{children:d.map(r=>e.jsxs(W,{onClick:()=>i(r),style:{cursor:"pointer"},children:[e.jsx(v,{children:r.name}),e.jsx(v,{align:"left",children:r.salary}),e.jsxs(v,{align:"left",children:[r.centerPercentage,"%"]}),e.jsx(v,{align:"left",children:r.totalIncome})]},r.id))})]})})]}),re=({doctor:s,onSave:d,open:i,onClose:n})=>{const[c,r]=a.useState(""),[u,h]=a.useState(""),[m,x]=a.useState(""),T=()=>{d(s.id,parseFloat(c),parseFloat(u),parseFloat(m)),n()};return e.jsx(Q,{open:i,onClose:n,children:e.jsxs(U,{elevation:3,children:[e.jsxs(G,{variant:"h6",gutterBottom:!0,children:["إدخال بيانات الإيرادات للدكتور ",s.name]}),e.jsxs(p,{container:!0,spacing:2,children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(C,{fullWidth:!0,label:"الإيراد الكلي",type:"number",value:c,onChange:o=>r(o.target.value),InputProps:{inputProps:{min:0}}})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(C,{fullWidth:!0,label:"حصة الطبيب",type:"number",value:u,onChange:o=>h(o.target.value),InputProps:{inputProps:{min:0}}})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(C,{fullWidth:!0,label:"حصة المركز الطبي",type:"number",value:m,onChange:o=>x(o.target.value),InputProps:{inputProps:{min:0}}})}),e.jsx(p,{item:!0,xs:12,children:e.jsxs(te,{display:"flex",justifyContent:"flex-end",children:[e.jsx(k,{variant:"contained",color:"primary",onClick:T,style:{marginLeft:"10px"},children:"حفظ"}),e.jsx(k,{variant:"outlined",onClick:n,children:"إلغاء"})]})})]})]})})},Te=()=>{var B,F,L,E,w,R;const[s,d]=a.useState(null),[i,n]=a.useState([]),[c,r]=a.useState([]),[u,h]=a.useState(null),[m,x]=a.useState(!1),[T,o]=a.useState(""),l=z(),b=(F=(B=l==null?void 0:l.state)==null?void 0:B.clinic)==null?void 0:F.value,D=(E=(L=l==null?void 0:l.state)==null?void 0:L.clinic)==null?void 0:E.label,O=(w=l==null?void 0:l.state)==null?void 0:w.doctors,f=(R=l==null?void 0:l.state)==null?void 0:R.searchedTerm;a.useEffect(()=>{d({value:b,label:D})},[b,D]),a.useEffect(()=>{if(s){const t=H();n(t),r(t)}},[s]),a.useEffect(()=>{f&&(o(f),P(f))},[f,i]);const H=()=>O.filter(t=>t.specialty===(s==null?void 0:s.value)),P=t=>{const j=i.filter(S=>S.name.toLowerCase().includes(t.toLowerCase())||s&&s.label.toLowerCase().includes(t.toLowerCase()));r(j)},V=t=>{o(t),P(t)},$=t=>{h(t),x(!0)},I=()=>{x(!1),h(null)},q=(t,j,S,A)=>{console.log(`حفظ بيانات الإيرادات للطبيب ${t}:`,{totalRevenue:j,doctorShare:S,centerShare:A});const M=i.map(y=>y.id===t?{...y,totalRevenue:j,doctorShare:S,centerShare:A}:y);n(M),r(M),I()};return s?e.jsxs(e.Fragment,{children:[e.jsx(se,{clinic:s,doctors:c,onDoctorSelect:$,searchTerm:T,setSearchTerm:V}),u&&e.jsx(re,{doctor:u,onSave:q,open:m,onClose:I})]}):e.jsx("div",{children:"جاري التحميل..."})};export{Te as default};
