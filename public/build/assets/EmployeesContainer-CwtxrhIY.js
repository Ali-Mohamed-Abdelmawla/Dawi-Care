import{j as e,r as d,N as E,d as b,s as g,k as C}from"./index-DF1D02Hj.js";import{C as v}from"./CustomDataGrid-CNTFpQZZ.js";import{s as c}from"./styled-CPBbA9UG.js";import{C as w,a as N}from"./CardContent-Be-YTDra.js";import{B as p}from"./Box-D4cKv5_V.js";import{T as s}from"./Typography-D94uCwLm.js";import{G as j}from"./TextField-BCa7AWxh.js";import{C as S}from"./Chip-BCCKjiS7.js";import{b as k}from"./Menu-C7haSOWu.js";import{B as u}from"./Button-DJQ79VO-.js";import{u as B}from"./useEmployeeApi-BGNvU3FX.js";import"./Paper-C9iPag-B.js";import"./useThemeProps-B6NQfqaC.js";import"./useThemeProps-wCF_0idl.js";import"./getThemeProps-60JEWZhT.js";import"./toPropertyKey-PLuKRk1e.js";import"./OutlinedInput-BKrgIPXM.js";import"./isMuiElement-DtCTRzqF.js";import"./mergeSlotProps-BtuCJPHe.js";import"./IconButton-CVXum2NQ.js";import"./Tooltip-BYenHq1v.js";import"./useSlotProps-C21nwL-b.js";import"./Toolbar-D268zmC0.js";import"./MenuItem-BDtCcL-v.js";import"./ListItemText-DboCFKAP.js";import"./InputAdornment-DbWrX7NJ.js";import"./CircularProgress-C94875X6.js";import"./KeyboardArrowRight-nCMYu8V0.js";import"./TableCell-CbZ5-y0A.js";import"./createStyled-93osxTnM.js";import"./axios-CyFV80k_.js";const D=c(w)({maxWidth:600,width:"300px",margin:"auto",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",borderRadius:16,overflow:"hidden"}),A=c(p)({backgroundColor:"#1976d2",color:"#ffffff",padding:"16px",textAlign:"center"}),I=c(N)({padding:0}),_=c(p)({display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"8px"}),F=({employee:t})=>{var n;const i=[];return(n=t.weekdays)==null||n.forEach(r=>{console.log(r),i.push(`${r.day}`)}),e.jsxs(D,{children:[e.jsx(A,{children:e.jsx(s,{variant:"h5",component:"div",children:"بطاقة هوية الموظف"})}),e.jsxs(I,{children:[e.jsx(j,{container:!0,spacing:0,alignItems:"center",children:e.jsxs(j,{item:!0,m:2,xs:7,children:[e.jsx(s,{variant:"h6",component:"div",children:t.name}),e.jsx(s,{color:"text.secondary",children:t.description})]})}),e.jsxs(p,{mt:2,ml:2,px:2,pb:2,children:[e.jsxs(s,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"الرقم القومي:"})," ",t.national_id]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"رقم الهاتف:"})," ",t.phone_number]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"الراتب الثابت:"})," ",t.fixed_salary," جنيه"]}),e.jsx(s,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"ايام العمل:"})}),e.jsx(_,{children:i.map((r,l)=>e.jsx(S,{label:r,size:"small",color:"primary",variant:"outlined"},l))})]})]})]})},T=({employees:t,handleEditClick:i,handleDeleteClick:n})=>{const[r,l]=d.useState(null),m=o=>{l(o)},x=()=>{l(null)},f=[{field:"name",headerName:"الاسم",type:"string",align:"left",flex:1},{field:"description",headerName:"التوصيف الوظيفي",type:"string",align:"left",flex:1},{field:"fixed_salary",headerName:"االراتب",type:"string",align:"left",flex:.7},{field:"phone_number",headerName:"رقم الهاتف",type:"string",align:"left",flex:1},{field:"actions",headerName:"الاعدادات",type:"actions",align:"left",flex:2,renderCell:o=>e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"tableBtn",onClick:()=>m(o.row),children:"تفاصيل"}),e.jsx(u,{className:"tableBtn",onClick:()=>i(o.row),children:"تعديل"}),e.jsx(u,{className:"tableBtn",onClick:()=>n(o.row.id),children:"حذف"})]})}],h=t.map((o,a)=>({tableIndex:a+1,...o}));return t.length===0?e.jsx(E,{}):e.jsxs("div",{className:"table-wrapper",style:{flex:1,overflow:"hidden"},children:[e.jsx("h1",{style:{marginBottom:"20px"},children:"الموظفون"}),e.jsx(v,{getRowId:o=>o.tableIndex,rows:h,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5,8,11]}),e.jsx(k,{open:r!==null,onClose:x,"aria-labelledby":"employee-details-modal","aria-describedby":"employee-details-description",children:e.jsx(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"90%",maxHeight:"90%",overflow:"auto"},children:r&&e.jsx(F,{employee:r})})})]})},me=()=>{const[t,i]=d.useState([]),[n,r]=d.useState(!0),l=b(),{getAllEmployees:m,deleteEmployee:x}=B();d.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const a=await m();i(a)}catch(a){console.error("Error fetching Employee:",a),g.fire({icon:"error",title:"Failed to fetch Employee"})}finally{r(!1)}},h=a=>{l("/SystemAdmin/Employees/EditEmployee",{state:{editData:a}})},o=async a=>{try{await x(a),i(t.filter(y=>y.id!==a)),g.fire({icon:"success",title:"Employee data removed successfully."})}catch(y){console.error("Error deleting Employee:",y),g.fire({icon:"error",title:"Failed to delete Employee"})}};return n?e.jsx(C,{}):e.jsx(T,{employees:t,handleEditClick:h,handleDeleteClick:o})};export{me as default};
